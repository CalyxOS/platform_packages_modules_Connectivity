{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "83f9389d_029c1cd8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2022-08-21T19:18:03Z",
      "side": 1,
      "message": "It builds and runs, and it boots successfully in an emulator, but it has not been verified and it involves more volatile changes than would be ideal. Still, it may be a possible option if a better solution isn\u0027t found. See also https://review.calyxos.org/c/CalyxOS/platform_system_netd/+/12839",
      "revId": "c33390a4284b30d583a181adb8b88ab8f02619bb",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "964315f2_4fcaf751",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2022-08-21T19:33:07Z",
      "side": 1,
      "message": "More info about libnetd_updatable in this commit message: https://cs.android.com/android/_/android/platform/packages/modules/Connectivity/+/1647f60d66cf7f85586607d49e94fd0747734c76\n\nI\u0027m not sure what negative implications there might be to changing libnetd_updatable like this, if any, apart from upkeep overhead.",
      "revId": "c33390a4284b30d583a181adb8b88ab8f02619bb",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "535b54d7_6bae0135",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2022-08-29T08:07:38Z",
      "side": 1,
      "message": "There\u0027s an open patch to revert this in 12L https://review.calyxos.org/c/CalyxOS/platform_packages_modules_Connectivity/+/10871 since we\u0027d like to support apex module updates and unfortunately updating the API is an incompatible change (from what I understand).",
      "revId": "c33390a4284b30d583a181adb8b88ab8f02619bb",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f9be1d79_9f7b38e1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-08-29T08:39:01Z",
      "side": 1,
      "message": "It\u0027s possible to make this work in theory but in practice we don\u0027t know and it just adds additional complexity, so unless absolutely necessary (which in this case doesn\u0027t look like it), we should avoid changes here.\n\nStill, let\u0027s revisit once everything else is merged.",
      "parentUuid": "535b54d7_6bae0135",
      "revId": "c33390a4284b30d583a181adb8b88ab8f02619bb",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e5cd12a0_6976e7d6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2022-08-29T08:45:30Z",
      "side": 1,
      "message": "Sorry, I got confused. This is actually used for the sockets in netd. TrafficController was moved out of netd and we cannot query if a UID\u0027s networking is blocked without this function. Going to have to investigate this.",
      "parentUuid": "f9be1d79_9f7b38e1",
      "revId": "c33390a4284b30d583a181adb8b88ab8f02619bb",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7231e729_f8de20ad",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2022-08-29T08:59:24Z",
      "side": 1,
      "message": "It wants to update ABIs given the changes are made to the public updatable APIs $ANDROID_BUILD_TOP/development/vndk/tools/header-checker/utils/create_reference_dumps.py  -l libnetd_updatable",
      "revId": "c33390a4284b30d583a181adb8b88ab8f02619bb",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f277db1e_1502a801",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2022-08-29T17:58:20Z",
      "side": 1,
      "message": "I get the following error when running the command\n```\nFAILED:\nbuild/make/core/Makefile:4710: warning: Neither INSTALLED_KERNEL_TARGET nor INSTALLED_BOOTIMAGE_TARGET is defined when PRODUCT_OTA_ENFORCE_VINTF_KERNEL_REQUIREMENTS  is true. Information about the updated kernel cannot be built into OTA update package. You can fix this by: (1) setting TARGET_NO_KERNEL to false and installing the built kernel to out/target/product/generic/kernel, so that kernel information will be extracted from the built kernel; or (2) Add a prebuilt boot image and specify it in BOARD_PREBUILT_BOOTIMAGE; or (3) extracting kernel configuration and defining BOARD_KERNEL_CONFIG_FILE and BOARD_KERNEL_VERSION manually; or (4) unsetting PRODUCT_OTA_ENFORCE_VINTF_KERNEL_REQUIREMENTS manually.\nbuild/make/core/tasks/dex_preopt_check.mk:13: warning:  Missing compilation artifacts. Dexpreopting is not working for some system server jars\nOffending entries:\nsystem/framework/oat/arm/org.lineageos.platform.odex\nsystem/framework/oat/arm/org.lineageos.platform.vdex\nIn file included from build/make/core/main.mk:1454:\nIn file included from build/make/core/Makefile:6938:\nbuild/make/core/tasks/dex_preopt_check.mk:13: error: Build failed.\n19:57:20 ckati failed with: exit status 1\nTraceback (most recent call last):\n  File \"/home/uldiniad/calyx/development/vndk/tools/header-checker/utils/create_reference_dumps.py\", line 211, in \u003cmodule\u003e\n    main()\n  File \"/home/uldiniad/calyx/development/vndk/tools/header-checker/utils/create_reference_dumps.py\", line 202, in main\n    num_processed \u003d create_source_abi_reference_dumps_for_all_products(args)\n  File \"/home/uldiniad/calyx/development/vndk/tools/header-checker/utils/create_reference_dumps.py\", line 148, in create_source_abi_reference_dumps_for_all_products\n    make_libs_for_product(args.libs, product, args.build_variant,\n  File \"/home/uldiniad/calyx/development/vndk/tools/header-checker/utils/create_reference_dumps.py\", line 36, in make_libs_for_product\n    make_libraries(product, variant, vndk_version, targets, libs)\n  File \"/home/uldiniad/calyx/development/vndk/tools/header-checker/utils/utils.py\", line 166, in make_libraries\n    lsdump_paths \u003d read_lsdump_paths(product, variant, vndk_version, targets,\n  File \"/home/uldiniad/calyx/development/vndk/tools/header-checker/utils/utils.py\", line 255, in read_lsdump_paths\n    make_targets(product, variant, [lsdump_paths_file_path])\n  File \"/home/uldiniad/calyx/development/vndk/tools/header-checker/utils/utils.py\", line 156, in make_targets\n    subprocess.check_call(make_cmd, cwd\u003dAOSP_DIR)\n  File \"/usr/lib/python3.10/subprocess.py\", line 369, in check_call\n    raise CalledProcessError(retcode, cmd)\nsubprocess.CalledProcessError: Command \u0027[\u0027build/soong/soong_ui.bash\u0027, \u0027--make-mode\u0027, \u0027-j\u0027, \u0027TARGET_PRODUCT\u003daosp_arm\u0027, \u0027TARGET_BUILD_VARIANT\u003duserdebug\u0027, \u0027out/target/product/generic/lsdump_paths.txt\u0027]\u0027 returned non-zero exit status 1.\n```",
      "parentUuid": "7231e729_f8de20ad",
      "revId": "c33390a4284b30d583a181adb8b88ab8f02619bb",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f35e3dd4_62c204d2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2022-08-30T02:16:26Z",
      "side": 1,
      "message": "So, I didn\u0027t know this at the time, but that command only worked for me before I included calyx-sdk. To convolute it further, the resulting abi-dumps files continued to be usable after I included calyx-sdk. But now that it\u0027s included, I get the same error if trying to run it again. So, it may be worth finding a different way to address this.\n\nTook some messy notes when thinking of other ways to deal with this that may or may not be useful: https://gitlab.com/-/snippets/2398361\n\nWould be happy to discuss further in dev room or wherever works, if you want. Sorry for not working collaboratively on this initially.",
      "parentUuid": "f277db1e_1502a801",
      "revId": "c33390a4284b30d583a181adb8b88ab8f02619bb",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}