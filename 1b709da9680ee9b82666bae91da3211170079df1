{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4289c9db_47dbe0ea",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-10-18T14:12:58Z",
      "side": 1,
      "message": "This would definitely be worth sending to AOSP, just to see what they think.\n\nI _think_ Connectivity / networking is developed in the open as well, so master likely won\u0027t be too far off their internal tree",
      "revId": "1b709da9680ee9b82666bae91da3211170079df1",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "957795c9_bf7d4913",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2022-10-18T22:27:17Z",
      "side": 1,
      "message": "It\u0027s not *too* far off, but they have moved/copied some things from C++ code to Java code (`addUidInterfaceRules`, `addRule` are implemented in both now). This patch also doesn\u0027t fully account for `PRE_T` devices, which they would need to consider if/when deploying any updates to the Connectivity module through Play, but which isn\u0027t relevant for CalyxOS.\n\nThey have also expanded on a comment in `requiresVpnAllowRule`, *possibly* doubling down on the current behavior (why???):\n```\n         // On T and above, allow rules are needed for all VPNs. Allow rule with null iface is a\n         // wildcard to allow apps to receive packets on all interfaces. This is required to accept\n         // incoming traffic in Lockdown mode by overriding the Lockdown blocking rule.\n```\n\nI could still try it though and see what happens!",
      "parentUuid": "4289c9db_47dbe0ea",
      "revId": "1b709da9680ee9b82666bae91da3211170079df1",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a71a141e_03f7ce11",
        "filename": "service/src/com/android/server/ConnectivityService.java",
        "patchSetId": 3
      },
      "lineNbr": 7776,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2022-10-18T22:30:16Z",
      "side": 1,
      "message": "Never mind the \"doubling down\" comment, it was already there but moved. Would be great to know their reasoning though.",
      "revId": "1b709da9680ee9b82666bae91da3211170079df1",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "485287f2_e9aad91d",
        "filename": "service/src/com/android/server/ConnectivityService.java",
        "patchSetId": 3
      },
      "lineNbr": 7776,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2022-10-18T22:35:20Z",
      "side": 1,
      "message": "Oh, they tried to fix it? And I guess they did, for fully-routed VPNs, but not others: https://android-review.googlesource.com/c/platform/packages/modules/Connectivity/+/2095365\n\n```\nBlock incoming packets in VPN Lockdown mode.\n\nCurrently, even when VPN Lockdown mode is enabled, incoming packets are\nnot dropped if VPN is not connected.\n\nThis commit fixed this issue.\nAfter this commit, If VPN Lockdown mode is enabled, incoming packets\nare dropped regardless of the VPN connectivity.\n```",
      "parentUuid": "a71a141e_03f7ce11",
      "revId": "1b709da9680ee9b82666bae91da3211170079df1",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "302838a4_0085f8e8",
        "filename": "service/src/com/android/server/ConnectivityService.java",
        "patchSetId": 3
      },
      "lineNbr": 7776,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-10-18T22:46:16Z",
      "side": 1,
      "message": "We could try to pull that for a start and then apply any additional changes you did on top.",
      "parentUuid": "485287f2_e9aad91d",
      "revId": "1b709da9680ee9b82666bae91da3211170079df1",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}